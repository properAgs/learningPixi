<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hello World</title>
</head>
<script src="pixi/pixi.min.js"></script>
<script src="util/scaleToWindow.js"></script>
<style>
  * {
    padding: 0;
    margin: 0
  }
</style>

<body>
  <script type="text/javascript">
    let type = "WebGL"
    const loader = PIXI.loader;
    const TextureCache = PIXI.utils.TextureCache;
    const Sprite = PIXI.Sprite;

    if (!PIXI.utils.isWebGLSupported()) {
      type = "canvas"
    }

    PIXI.utils.sayHello(type)

    //Create a Pixi Application
    let app = new PIXI.Application({
      width: 600,         // default: 800
      height: 600,        // default: 600
      antialias: true,    // default: false
      transparent: false, // default: false
      resolution: 1       // default: 1
    }
    );

    if (true) { // resize
      app.renderer.view.style.position = "absolute";
      app.renderer.view.style.display = "block";
      app.renderer.autoResize = true;

      //Add the canvas that Pixi automatically created for you to the HTML document
      document.body.appendChild(app.view);

      let myScale = 1;
      let resizeFunc = () => {
        myScale = scaleToWindow(app.renderer.view);
      };
      window.addEventListener("resize", resizeFunc);
      resizeFunc();
    }

    if (true) { // sprites
      let sprites = [];
      loader
        .add([
          "images/cat.png",
          "images/tileset.png",
          "images/treasureHunter.json",
        ])
        .load(() => {
          if (true) { // cat
            let texture = TextureCache["images/cat.png"];
            let sprite = new Sprite(texture);
            sprite.x = 96;
            sprite.y = 96;

            app.ticker.add(delta => sprite.x += 0.5 * delta);
            sprites.push(sprite);
          }
          if (true) { // rocket
            //Create the `tileset` sprite from the texture
            let texture = TextureCache["images/tileset.png"];
            //Create a rectangle object that defines the position and
            //size of the sub-image you want to extract from the texture
            //(`Rectangle` is an alias for `PIXI.Rectangle`)
            let rectangle = new PIXI.Rectangle(192, 128, 64, 64);

            //Tell the texture to use that rectangular section
            texture.frame = rectangle;

            //Create the sprite from the texture
            let sprite = new Sprite(texture);

            //Position the rocket sprite on the canvas
            sprite.x = 32;
            sprite.y = 32;

            //Add the rocket to the stage
            sprites.push(sprite);
          }
          if (true) {
            let texture = TextureCache["explorer.png"];
            let sprite = new Sprite(texture);
            // app.stage.addChild(sprite);
            sprites.push(sprite);
          }
          if (true) // container
          {
            let subContainer = new PIXI.Container();
            subContainer.addChild(sprites[0]);
            subContainer.addChild(sprites[1]);
            subContainer.addChild(sprites[2]);
            app.stage.addChild(subContainer);
          }
        });
    }

  </script>
</body>

</html>